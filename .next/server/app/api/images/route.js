(()=>{var e={};e.id=312,e.ids=[312],e.modules={62849:e=>{function t(e){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=62849,e.exports=t},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},78893:e=>{"use strict";e.exports=require("buffer")},84770:e=>{"use strict";e.exports=require("crypto")},17702:e=>{"use strict";e.exports=require("events")},98216:e=>{"use strict";e.exports=require("net")},35816:e=>{"use strict";e.exports=require("process")},76162:e=>{"use strict";e.exports=require("stream")},74026:e=>{"use strict";e.exports=require("string_decoder")},95346:e=>{"use strict";e.exports=require("timers")},82452:e=>{"use strict";e.exports=require("tls")},17360:e=>{"use strict";e.exports=require("url")},21764:e=>{"use strict";e.exports=require("util")},71568:e=>{"use strict";e.exports=require("zlib")},6005:e=>{"use strict";e.exports=require("node:crypto")},29977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>g,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>d,staticGenerationAsyncStorage:()=>l});var s={};r.r(s),r.d(s,{GET:()=>u});var i=r(49303),a=r(88716),o=r(60670),n=r(62458);async function u(e){try{let t=e.nextUrl.searchParams,r=parseInt(t.get("page")||"1"),s=parseInt(t.get("entries")||"50"),i=await (0,n.U2)(["SELECT * FROM images ORDER BY created_at DESC LIMIT ? OFFSET ?",[s,(r-1)*s]]);if(!(Array.isArray(i)&&i.length>0))return Response.json({totalPage:0,images:[]});i=i.map(e=>(e.id=null,e.prompt=null,e.sub=null,e));let a=await (0,n.U2)("SELECT COUNT(*) AS count FROM images"),o=Array.isArray(a)?a[0].count:0,u=Math.ceil(o/s);return Response.json({totalPage:u,images:i})}catch(e){return Response.json({message:"Failed to get images",error:e.message},{status:500})}}let c=new i.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/images/route",pathname:"/api/images",filename:"route",bundlePath:"app/api/images/route"},resolvedPagePath:"C:\\Users\\Chelovek\\Desktop\\website.online\\picxob.borislukrece.pro\\src\\app\\api\\images\\route.tsx",nextConfigOutput:"",userland:s}),{requestAsyncStorage:p,staticGenerationAsyncStorage:l,serverHooks:d}=c,m="/api/images/route";function g(){return(0,o.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:l})}},62458:(e,t,r)=>{"use strict";r.d(t,{U2:()=>u,v_:()=>c});var s=r(36352),i=r(73785);let a=(0,s.uj)(),o=(0,i.createPool)({host:a.DB_HOST,user:a.DB_USER,password:a.DB_PASSWORD,database:a.DB_NAME,waitForConnections:!0,connectionLimit:10,queueLimit:0});async function n(e,t){let r="",s=[];switch("string"==typeof e?r=e:Array.isArray(e)&&(r=e[0],s=e[1]||[]),t){case"get":if(!r.startsWith("SELECT"))throw Error("Invalid SQL statement");break;case"post":if(!r.startsWith("INSERT INTO"))throw Error("Invalid SQL statement");break;case"update":if(!r.startsWith("UPDATE"))throw Error("Invalid SQL statement");break;case"delete":if(!r.startsWith("DELETE"))throw Error("Invalid SQL statement")}let[i]=await o.query(r,s);return i}async function u(e){return await n(e,"get")}async function c(e,t=null){let r=await n(e,"post");return await new Promise(async e=>{try{if(t){let s=await u([`SELECT * FROM ${t} WHERE id = ? LIMIT 1`,[r.insertId]]);Array.isArray(s)&&s.length>0&&e(s[0])}else e(null)}catch(t){console.log("Error getting item added: ",t.message),e(null)}})}},36352:(e,t,r)=>{"use strict";r.d(t,{DO:()=>i,FX:()=>a,uj:()=>o});var s=r(9576);function i(){let e=(0,s.Z)();return`${e}`}function a(){return"https://picxob.borislukrece.com"}function o(){return{DB_HOST:process.env.DB_HOST,DB_USER:process.env.DB_USER,DB_NAME:process.env.DB_NAME,DB_PASSWORD:process.env.DB_PASSWORD}}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,398],()=>r(29977));module.exports=s})();